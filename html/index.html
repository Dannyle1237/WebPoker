<!doctype html>
<html>
<meta charset="utf-8">

<head>
  <title>WebPoker Game</title>
  <link rel = "stylesheet" href="styles.css" >
  <p class = "title" > Welcome to our WebPoker Game!</p>

</head>

<body>
  <div class = "row">
    <div class = "column" id = "player1" style = "display:none">
      <img src = "PlayerPicture.png" style = "width:25%">
      <p class = "player_name">name here</p>
    </div>
  </div>
  <p class = "lobby">
    <input class = "input_box" id="send_name" type="text" placeholder = "Enter name here">
    <input class = "lobby_button" id = "join_button" type="button" name="join_button" value="Join" onclick="join()">
    <input class = "lobby_button" id = "tutorial_button" type="button" name="tutorial_button" value="Tutorial" onclick="tutorial()">
  </p>

  <div class = "gameStatus" id="gameStatus">
    <span id = "wallet">Money: $1000</span>
  </div>
  <div style = "font-size: 25px" class = "textbox" id="textbox">
  </div>
</body>
</html>

<script>
  var connection = null;

  var serverUrl;
  serverUrl ="ws://" + window.location.hostname + ":8880";
  console.log("URL IS " + serverUrl);
  connection = new WebSocket(serverUrl, "json");
  connection.onopen = function (evt) {
    console.log("open");
  }

  var cardIdx = 0;
  var playerID = 0;
  let money = 0;

  //When client receives data from server
  connection.onmessage = function (evt) {
    var msg;
    msg = evt.data;

    console.log("Message received: " + msg);

    // This is a hack for this example.
    // The only time the WebPoker server sends data just
    // to this client is at the beginging, when the connection
    // is first made.  The first communication tells us which
    // connection number we are, which is very import.
    // So, we detect this situation where it is not game state

    // Take the msg and turn it into a javascript object
    const obj = JSON.parse(msg);
  }

  function join(){
    var msg = {
      event: "JOIN",
      playerID: JSON.playerID,
      name: document.getElementById("send_name").value
    };
    connection.send(JSON.stringify(msg));
    var x = document.getElementById("send_name");
    x.style.display = "none";
    var y = document.getElementById("join_button");
    y.parentNode.removeChild(y);
    var z = document.getElementById("player1");
    z.style.display = "initial";
  }
  
</script>